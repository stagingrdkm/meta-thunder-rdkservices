From 0c7eb7f172594c93284141dec583e63f3e6fe82b Mon Sep 17 00:00:00 2001
From: Nikita Poltorapavlo <Nikita_Poltorapavlo2@cable.comcast.com>
Date: Mon, 18 Jul 2022 14:22:57 +0300
Subject: [PATCH] Revert "Merge pull request #137 from
 mikolaj-staworzynski-red/ONEM-23137-Allow-to-select-interfaces-R2"

This reverts commit fc38a87aa9c43c79e75fd864068a5a55247d8f60, reversing
changes made to 4ec7c6f8e14b152143a105a41f4c62b6723372c4.
---
 CMakeLists.txt             |  4 +---
 definitions/CMakeLists.txt | 11 ++++-------
 interfaces/CMakeLists.txt  |  6 ++----
 3 files changed, 7 insertions(+), 14 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index c88235f..186c7db 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -15,16 +15,13 @@
 # See the License for the specific language governing permissions and
 # limitations under the License.

-cmake_minimum_required(VERSION 3.12)
+cmake_minimum_required(VERSION 3.3)

 project(Interfaces)
 find_package(WPEFramework)

 project_version(1.0.0)

-set(INTERFACES_PATTERNS "I*.h" CACHE STRING "Patterns matching files for which stubs should be generated")
-set(JSONRPC_PATTERNS "*.json" CACHE STRING "Patterns matching files for which json stubs should be generated")
-
 message(STATUS "Setting up ${PROJECT_NAME} v${PROJECT_VERSION}")

 find_package(CompileSettingsDebug CONFIG REQUIRED)
diff --git a/interfaces/CMakeLists.txt b/interfaces/CMakeLists.txt
index 657dd47..949d433 100644
--- a/interfaces/CMakeLists.txt
+++ b/interfaces/CMakeLists.txt
@@ -23,11 +23,9 @@ if(NOT GENERATOR_SEARCH_PATH)
     set(GENERATOR_SEARCH_PATH ${CMAKE_SYSROOT}${CMAKE_INSTALL_PREFIX}/include/${NAMESPACE})
 endif()

-separate_arguments(INTERFACES_PATTERNS)
-file(GLOB INTERFACES_HEADERS ${INTERFACES_PATTERNS})
-
-ProxyStubGenerator(INPUT "${INTERFACES_HEADERS}" OUTDIR "${CMAKE_CURRENT_BINARY_DIR}/generated" INCLUDE_PATH ${GENERATOR_SEARCH_PATH})
+ProxyStubGenerator(INPUT "${CMAKE_CURRENT_SOURCE_DIR}" OUTDIR "${CMAKE_CURRENT_BINARY_DIR}/generated" INCLUDE_PATH ${GENERATOR_SEARCH_PATH})

+file(GLOB INTERFACES_HEADERS I*.h)
 file(GLOB JSON_HEADERS json/*.h)
 list(APPEND INTERFACES_HEADERS ValuePoint.h)
 list(APPEND INTERFACES_HEADERS Module.h)
diff --git a/definitions/CMakeLists.txt b/definitions/CMakeLists.txt
index 22ab482..2fdee53 100644
--- a/definitions/CMakeLists.txt
+++ b/definitions/CMakeLists.txt
@@ -14,17 +14,14 @@
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
+cmake_minimum_required(VERSION 3.7.2)
+
 find_package(JsonGenerator REQUIRED)

 set(Target ${NAMESPACE}Definitions)

-separate_arguments(JSONRPC_PATTERNS)
-list(TRANSFORM JSONRPC_PATTERNS PREPEND "${CMAKE_CURRENT_SOURCE_DIR}/../jsonrpc/")
-file(GLOB JSON_FILE ${JSONRPC_PATTERNS})
-
-separate_arguments(INTERFACES_PATTERNS)
-list(TRANSFORM INTERFACES_PATTERNS PREPEND "${CMAKE_CURRENT_SOURCE_DIR}/../interfaces/")
-file(GLOB INTERFACE_FILE ${INTERFACES_PATTERNS})
+file(GLOB JSON_FILE      "${CMAKE_CURRENT_SOURCE_DIR}/../jsonrpc/*.json")
+file(GLOB INTERFACE_FILE "${CMAKE_CURRENT_SOURCE_DIR}/../interfaces/I*.h")

 set(PUBLIC_HEADERS "definitions.h")



